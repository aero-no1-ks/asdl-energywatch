(function(t){function e(e){for(var s,n,l=e[0],o=e[1],h=e[2],u=0,g=[];u<l.length;u++)n=l[u],r[n]&&g.push(r[n][0]),r[n]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);c&&c(e);while(g.length)g.shift()();return i.push.apply(i,h||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},r={app:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/scapp/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var h=0;h<l.length;h++)e(l[h]);var c=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),r=a("bb71");a("da64");s["a"].use(r["a"],{theme:{primary:"#003057",secondary:"#B3A369",accent:"#8c9eff",error:"#b71c1c"}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-toolbar",{attrs:{dark:"",app:"",color:"primary"}},[a("v-toolbar-title",{staticClass:"headline text-uppercase"},[a("span",{staticClass:"font-weight-light",attrs:{"text-color":"secondary"}},[t._v("GT Utilities Audit")])]),a("v-spacer")],1),a("v-content",[a("v-expansion-panel",{attrs:{expand:"",focusable:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("App info")]),a("v-flex",{attrs:{xs12:"","ma-2":""}},[a("p",[t._v("\n  This generates a spreadsheet chart that gives the values of of a specified source\n  for all buildings on a monthly basis. Clicking a cell in the table allows for\n  a chart to be generated to further examine the data. If a cell is orange colored,\n  that means there was a recorded decrease over that month (i.e. If a cell for April\n  is orange, then that means the value decreased from March to April). The value on the first\n  of each month is shown in the cell. Clicking 'All' will\n  allow for graphing over entire timespan.\n  The \"reset filter\" button allows for a correction of data (cumulative) when there are erronous resets in the data gathering process.\n  "),a("br"),a("br"),t._v("Legend: "),a("br"),a("ul",[a("li",[a("v-icon",{attrs:{color:"#FFA07A"}},[t._v("error")]),t._v(" This color indicates an abnormality from previous month, such as a reset  ")],1),a("li",[a("v-icon",{attrs:{color:"#778899"}},[t._v("error")]),t._v(" This color indicates Null values  ")],1),a("li",[a("v-icon",{attrs:{color:"#33F9FF"}},[t._v("error")]),t._v(" This color indicates Nonphyiscal values")],1)]),t._v("\n  Click on table cells to chart selected data\n")])])],1)],1),a("v-container",{attrs:{"grid-list-xs,sm,md,lg,xl":""}},[a("v-layout",{attrs:{row:"",wrap:"","pa-1":""}},[a("v-flex",{attrs:{xs4:"","pa-1":""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-text-field",t._g({attrs:{label:"Pick Start Date","prepend-icon":"event",readonly:""},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}},s))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-date-picker",{attrs:{type:"month"},on:{input:function(e){t.menu2=!1}},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}})],1)],1),a("v-flex",{attrs:{xs4:"","pa-1":""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-text-field",t._g({attrs:{label:"Pick End Date","prepend-icon":"event",readonly:""},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}},s))]}}]),model:{value:t.menu3,callback:function(e){t.menu3=e},expression:"menu3"}},[a("v-date-picker",{attrs:{type:"month"},on:{input:function(e){t.menu3=!1}},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1),a("v-flex",{attrs:{xs4:"","pa-1":""}},[a("v-select",{attrs:{items:t.qnameList,"item-text":"state",label:"Select","return-object":"","single-line":""},model:{value:t.qname,callback:function(e){t.qname=e},expression:"qname"}})],1)],1),a("v-btn",{attrs:{color:"primary",loading:t.loadingTable},on:{click:t.updateTable}},[t._v("Grab Data")]),a("v-btn",{attrs:{round:"",color:"primary",small:""},on:{click:function(e){t.drawer=!0}}},[t._v(" Show Graph")]),a("div",[a("table",{attrs:{border:"1"}},[a("thead",[a("tr",[a("th",[t._v("Date")]),t._l(t.days,function(e){return a("th",{attrs:{width:"50"}},[t._v(t._s(e))])})],2)]),a("tbody",t._l(t.itemList,function(e,s){return a("tr",{key:e.name},[a("td",[t._v(t._s(e.name))]),t._l(e.vals,function(r,i){return a("td",{attrs:{bgcolor:e.clr[i]},on:{click:function(e){return t.updateGraph(s,i)}}},[t._v(t._s(r))])})],2)}),0)])]),a("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:"",width:"800"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("span",{staticClass:"headline"},[t._v(" Select Data Operations")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.filterResets}},[t._v("Filter Resets")])],1),a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.filterPulses}},[t._v("Remove Impulse")])],1)],1),a("v-expansion-panel",{attrs:{expand:"",focusable:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("Data Operations Info")]),a("v-flex",{attrs:{xs12:"","ma-2":""}},[a("p",[t._v("\n  Reset filter will find resets in a cumulative quantity (such as condensate or\n  cooling total). Remove impulse will remove single point spikes or drops in the data\n  that are clearly erroneous. When examining total years (below) both filters are automatically\n  applied to the data.\n\n")])])],1)],1),a("v-card",{attrs:{"ma-1":""}},[a("span",{staticStyle:{margin:"10px"}},[a("div",{ref:"echartsCard",staticStyle:{height:"500px",margin:"10px"}})]),a("v-btn",{attrs:{small:"",round:"",color:t.clr2018},on:{click:t.change2018}},[t._v("2018")]),a("v-btn",{attrs:{small:"",round:"",color:t.clr2017},on:{click:t.change2017}},[t._v("2017")]),a("v-btn",{attrs:{small:"",round:"",color:t.clr2016},on:{click:t.change2016}},[t._v("2016")]),a("v-btn",{attrs:{small:"",round:"",color:t.clr2015},on:{click:t.change2015}},[t._v("2015")]),a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{round:"",loading:t.loading2,disabled:t.loading2,color:"primary"},on:{click:t.showgraphYearly}},[t._v("Show yearly Average")])],1),a("v-divider"),a("v-expansion-panel",{attrs:{expand:"",focusable:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("Data Quality")]),a("v-flex",{attrs:{xs12:"","ma-2":""}},[a("p",[t._v("\n    Sunburst diagram of the data quality gives a qualitative and quantitative\n    look at the quality of the selected data. The chart displays data errors such\n    as resets, null values, or error readings. \n\n  ")])])],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("span",{staticStyle:{margin:"10px"}},[a("div",{ref:"echartsCard3",staticStyle:{height:"500px",margin:"10px"}})])])],1),a("v-divider")],1)],1)],1)],1)],1)},n=[],l=a("a4bb"),o=a.n(l),h=a("75fc"),c=(a("6762"),a("2fdb"),a("7f7f"),a("bd86")),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{"text-xs-center":"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-img",{staticClass:"my-3",attrs:{src:a("9b19"),contain:"",height:"200"}})],1),s("v-flex",{attrs:{"mb-4":""}},[s("h1",{staticClass:"display-2 font-weight-bold mb-3"},[t._v("\n        Welcome to Vuetify\n      ")]),s("p",{staticClass:"subheading font-weight-regular"},[t._v("\n        For help and collaboration with other Vuetify developers,\n        "),s("br"),t._v("please join our online\n        "),s("a",{attrs:{href:"https://community.vuetifyjs.com",target:"_blank"}},[t._v("Discord Community")])])]),s("v-flex",{attrs:{"mb-5":"",xs12:""}},[s("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("What's next?")]),s("v-layout",{attrs:{"justify-center":""}},t._l(t.whatsNext,function(e,a){return s("a",{key:a,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])}),0)],1),s("v-flex",{attrs:{xs12:"","mb-5":""}},[s("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("Important Links")]),s("v-layout",{attrs:{"justify-center":""}},t._l(t.importantLinks,function(e,a){return s("a",{key:a,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])}),0)],1),s("v-flex",{attrs:{xs12:"","mb-5":""}},[s("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("Ecosystem")]),s("v-layout",{attrs:{"justify-center":""}},t._l(t.ecosystem,function(e,a){return s("a",{key:a,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])}),0)],1)],1)],1)},g=[],p={data:function(){return{ecosystem:[{text:"vuetify-loader",href:"https://github.com/vuetifyjs/vuetify-loader"},{text:"github",href:"https://github.com/vuetifyjs/vuetify"},{text:"awesome-vuetify",href:"https://github.com/vuetifyjs/awesome-vuetify"}],importantLinks:[{text:"Documentation",href:"https://vuetifyjs.com"},{text:"Chat",href:"https://community.vuetifyjs.com"},{text:"Made with Vuetify",href:"https://madewithvuetifyjs.com"},{text:"Twitter",href:"https://twitter.com/vuetifyjs"},{text:"Articles",href:"https://medium.com/vuetify"}],whatsNext:[{text:"Explore components",href:"https://vuetifyjs.com/components/api-explorer"},{text:"Select a layout",href:"https://vuetifyjs.com/layout/pre-defined"},{text:"Frequently Asked Questions",href:"https://vuetifyjs.com/getting-started/frequently-asked-questions"}]}}},d=p,m=a("2877"),v=a("6544"),f=a.n(v),y=a("a523"),b=a("0e8f"),x=a("adda3"),S=a("a722"),w=Object(m["a"])(d,u,g,!1,null,null,null),D=w.exports;f()(w,{VContainer:y["a"],VFlex:b["a"],VImg:x["a"],VLayout:S["a"]});var j,k=a("313e"),C=a.n(k),O={name:"App",components:{HelloWorld:D},data:function(){var t;return t={items:[{state:"Skiles",abbr:"B002M"},{state:"B084M",abbr:"B084M"}],svalue:["B002M","B005M"],building:"",qname:"Condensate",qnameList:["Condensate","Cooling Total"],showGraph:!1,labels:["0","1","2","3"],value:[1,2,3,4],graphdata:[{sName:"B002M",sID:"1238",qName:"Condensate",qID:"497",data:[{time:"2019-01-25 14:15",value:6286035}]}],startdate:(new Date).toISOString().substr(0,10),endDate:(new Date).toISOString().substr(0,10),dateArray:[],menu:!1,menu2:!1,dateArrayString:"",years:[!1,!1,!1,!1],dateStr2018:"",dateArr2018:[],clr2017:"primary",clr2018:"primary",dateStr2017:"",dateArr2017:[],clr2016:"primary",dateStr2016:"",dateArr2016:[],clr2015:"primary",dateStr2015:"",dateArr2015:[],averagedValues:[],loading1:!1,loading2:!1,graphseries:[],timeseries:[],graphseries2:[],avgbtn:!1,cumulativeCheck:!1,cumulativeColor:"primary",num:98,days:[],graphDays:[],itemList:[],dateStrAll:"",date1:"2018-01",date2:"2019-01"},Object(c["a"])(t,"menu",!1),Object(c["a"])(t,"modal",!1),Object(c["a"])(t,"menu2",!1),Object(c["a"])(t,"menu3",!1),Object(c["a"])(t,"drawer",null),Object(c["a"])(t,"loadingTable",!1),Object(c["a"])(t,"disSmooth",!0),Object(c["a"])(t,"cumulativeCheck",!0),Object(c["a"])(t,"cumulativeColor","primary"),Object(c["a"])(t,"graphVals",[]),Object(c["a"])(t,"score",100),Object(c["a"])(t,"numResets",0),Object(c["a"])(t,"numSaturated",0),Object(c["a"])(t,"numSkips",0),Object(c["a"])(t,"numPulse",0),Object(c["a"])(t,"corVals",[]),Object(c["a"])(t,"score",100),Object(c["a"])(t,"scoreColor","green"),Object(c["a"])(t,"panel1",!1),t},methods:(j={formatData:function(){for(var t=[],e=[],a=[],s=[],r=0;r<_.size(this.graphseries2);r++)"Selected Quantity"==this.graphseries2[r].name?t=this.graphseries2[r].data:s.push(this.graphseries2[r].data);for(var i=0;i<_.size(this.graphDays);i++)e.push(this.graphDays[i].slice(5,10));if(this.graphDays=e,console.log(e),console.log(t),console.log(this.timeseries),console.log(s),e.length>s[0].length){for(var n=0;n<e.length;n++)if(0!=this.timeseries.includes(e[n]))for(var l=0;l<this.timeseries.length;l++)e[n]==this.timeseries[l]&&a.push(s[0][l]);else a.push(null);this.graphseries2[1].data=s[0]}else this.graphDays=this.timeseries;console.log("NEW SERIES"),console.log(a)},updateGraph:function(t,e){var a=this;this.graphseries2=[],this.graphDays=[],this.drawer=!0,console.log("Item List"),console.log(this.itemList);var s=this.itemList[t],r=this.days[e];if(this.building=s.name,console.log(s.vals),console.log(s.name),console.log(r),"All"==r){console.log("All dates selected"),console.log(this.date1),console.log(this.date2);var i=[],n=String(this.date1)+"-01",l=String(this.date2)+"-01";console.log(n);var o=new Date(n),h=new Date(l);while(o<=h){i.push(String(o.getFullYear())+"-"+String(o.getMonth()+1)+"-"+String(o.getDate()));var c=o.getDate()+1;o.setDate(c)}this.dateStrAll=i.join("||"),this.$http.get("http://energywatch.fac.gatech.edu:3000/api/rollcall?bldg="+s.name+"&num=1&time="+this.dateStrAll).then(function(t){console.log(t);for(var e=t.data,r=[],i=[],n=0;n<_.size(e);n++)e[n].qName==a.qname&&(r.push(e[n].data[0].time),i.push(e[n].data[0].value));console.log(i);for(var l=i[0],o=0;o<i.length;o++)i[o]=i[o]-l;a.graphseries2.push({type:"line",data:i,name:"Selected Quantity"}),a.graphVals=i,a.corVals=i,a.graphDays=r;var h={legend:{type:"scroll",x:"right"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:50,top:10,right:30,bottom:20},xAxis:{type:"category",data:a.graphDays},yAxis:{type:"value",max:"dataMax",min:"dataMin"},series:a.graphseries2,title:{text:s.name+" "+a.qname,x:"center"}};console.log(a.graphDays),a.chart.setOption(h,!0)})}else{var u=new Date(r),g=[],p=(new Date("2017-01-02"),new Date("2018-01-01"),String(u.getFullYear())+"-"+String(u.getMonth()+2)+"-"+String(u.getDate()));g.join("||"),this.$http.get("http://energywatch.fac.gatech.edu:3000/api/rollcall?bldg="+s.name+"&num=3000&time="+p).then(function(t){for(var e=t.data,r=[],i=[],n=0;n<e.length;n++)if(e[n].qName==a.qname)for(var l=0;l<_.size(e[n].data);l++)r.push(e[n].data[l].time),i.push(e[n].data[l].value);a.graphDays=_.reverse(r),console.log(i),console.log(r);var o={legend:{type:"scroll",x:"right"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:50,top:10,right:30,bottom:20},xAxis:{type:"category",data:a.graphDays},yAxis:{type:"value",max:"dataMax",min:"dataMin"},series:{type:"line",data:_.reverse(i)},title:{text:s.name+" "+a.qname,x:"center"}};a.chart.setOption(o,!0)})}},updateTable:function(){var t=this;this.loadingTable=!0,console.log(this.date1),console.log(this.date2),console.log(this.qname);var e=[],a=String(this.date1)+"-01",s=String(this.date2)+"-01";console.log(a);var r=new Date(a),i=new Date(s);this.date1,this.date2;while(r<=i){1==r.getDate()&&e.push(String(r.getFullYear())+"-"+String(r.getMonth()+1)+"-"+String(r.getDate()));var n=r.getDate()+1;r.setDate(n)}var l=e.join("||");this.$http.get("http://energywatch.fac.gatech.edu:3000/api/rollcall?num=1&time="+l).then(function(a){console.log(a.data);for(var s=a.data,r=[],i=0;i<s.length;i++)s[i].qName==t.qname&&r.push(s[i]);console.log(r);for(var n=[],o=0;o<r.length;o++)n.push(r[o].sName);for(var h=[],c=_.uniq(n),u=0;u<c.length;u++);console.log(c);for(var g=0;g<_.size(c);g++){for(var p=[],d=0;d<r.length;d++)r[d].sName==c[g]&&5==_.size(r[d])&&(null==r[d].data[0].value?p.push("Null"):p.push(r[d].data[0].value));p.push("All");for(var m=["#FFFFFF"],v=0;v<p.length-1;v++)p[v]>p[v+1]?m.push("#FFA07A"):"Null"==p[v+1]?m.push("#778899"):m.push("#FFFFFF");h.push({name:c[g],vals:p,clr:m}),console.log(p),p=[]}t.days=e,t.days.push("All"),console.log(l),t.itemList=h,t.loadingTable=!1,console.log("Item List"),console.log(t.itemList)})},smoothData:function(){console.log("Smoothing data"),console.log(this.graphseries);for(var t=0;t<_.size(this.graphseries);t++){var e=this.graphseries[t].data;console.log(e);var a=[];a.push(e[0]);for(var s=1;s<e.length-1;s++){var r=(e[s-1]+e[s+1])/2;e[s-1]>e[s]?(console.log("Replacing item"),a.push(r)):a.push(e[s])}a.push(e[-1]),console.log(e),console.log(a),this.graphseries[t].data=a,console.log(this.graphseries)}this.timeseries,this.graphseries,this.building,this.qname},correctPulses:function(t){var e=[];e.push(t[0]),e.push(t[1]),e.push(t[2]);for(var a=3;a<t.length-3;a++){var s=(t[a-1]+t[a-2]+t[a-3])/3,r=(t[a+1]+t[a+2]+t[a+3])/3;t[a]>r&&t[a]>1.3*s&&null!=t[a]&&null!=t[a+1]&&null!=t[a+2]&&null!=t[a+3]?e.push((r+s)/2):t[a]<r&&t[a]<.5*s&&null!=t[a]&&null!=t[a+1]&&null!=t[a+2]&&null!=t[a+3]||(t[a],e.push(t[a]))}return e.push(t[-4]),e.push(t[-3]),e.push(t[-2]),e.push(t[-1]),e},filterPulses:function(){var t=this.corVals;console.log(t),this.numPulse=0,this.numSkips=0;var e=[];e.push(t[0]),e.push(t[1]),e.push(t[2]);for(var a=3;a<t.length-3;a++){var s=(t[a-1]+t[a-2]+t[a-3])/3,r=(t[a+1]+t[a+2]+t[a+3])/3;t[a]>r&&t[a]>1.3*s&&null!=t[a]&&null!=t[a+1]&&null!=t[a+2]&&null!=t[a+3]?(e.push((r+s)/2),this.numPulse+=1):t[a]<r&&t[a]<.5*s&&null!=t[a]&&null!=t[a+1]&&null!=t[a+2]&&null!=t[a+3]||(null==t[a]?(e.push(t[a]),this.numSkips+=1):e.push(t[a]))}e.push(t[-4]),e.push(t[-3]),e.push(t[-2]),e.push(t[-1]),this.corVals=e,console.log(this.corVals);for(var i=0;i<_.size(this.graphseries2);i++)"Selected Quantity"==this.graphseries2[i].name&&(this.graphseries2[i].data=e,this.graphseries2[i].push({connectNulls:!0}));var n={legend:{type:"scroll",x:"right"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:50,top:10,right:30,bottom:20},xAxis:{type:"category",data:this.graphDays},yAxis:{type:"value",max:"dataMax",min:"dataMin"},series:this.graphseries2,title:{text:this.building+" "+this.qname,x:"center"}};console.log("Options set"),this.chart.setOption(n,!0),this.updateScore(),this.updatePieChart()},correctReset:function(t){for(var e=0,a=[],s=0;s<t.length-1;s++)null==t[s]?a.push(null):a.push(t[s]+e),t[s]>t[s+1]&&(e+=Math.abs(t[s]-t[s+1]));return a.push(t[-1]+e),a},filterResets:function(){var t=this.graphVals,e=this.graphDays,a=0,s=[],r=0;console.log("Reset function called");for(var i=0;i<t.length-1;i++)console.log("in for loop"),null==t[i]?s.push(null):s.push(t[i]+a),t[i]>t[i+1]&&(r+=1,a+=Math.abs(t[i]-t[i+1]));this.numResets=r,s.push(t[-1]+a),console.log(s),console.log("DONE"),this.corVals=s;for(var n=0;n<_.size(this.graphseries2);n++)"Selected Quantity"==this.graphseries2[n].name&&(this.graphseries2[n].data=s);var l={legend:{type:"scroll",x:"right"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:50,top:10,right:30,bottom:20},xAxis:{type:"category",data:e},yAxis:{type:"value",max:"dataMax",min:"dataMin"},series:this.graphseries2,title:{text:this.building+" "+this.qname,x:"center"}};console.log("Options set"),this.chart.setOption(l,!0),this.updateScore(),this.updatePieChart()},updatePieChart:function(){var t,e=this.numResets+this.numSaturated+this.numSkips+this.numPulse,a=10-this.score/10,s=a*this.numResets/e,r=a*this.numSkips/e,i=a*this.numSaturated/e,n=a*this.numPulse/e;console.log(this.score),console.log(this.scoreColor);var l={series:[(t={radius:["30%","90%"],label:{rotate:45,position:"radial"},type:"sunburst",sort:null,highlightPolicy:"ancestor",data:[{name:"Bad",value:10-this.score/10,itemStyle:{color:"#B3A369"},children:[{name:"Null Values ("+String(this.numSkips)+")",value:r,itemStyle:{color:"grey"}},{name:"Saturated Values ("+String(this.numSaturated)+")",value:i,itemStyle:{color:"red"}},{name:"Resets ("+String(this.numResets)+")",value:s,itemStyle:{color:"orange"}},{name:"Pulses ("+String(this.numPulse)+")",value:n,itemStyle:{color:"pink"}}]},{name:"Good",value:this.score/10,itemStyle:{color:"#003057"}}]},Object(c["a"])(t,"label",{rotate:"radial"}),Object(c["a"])(t,"levels",[]),Object(c["a"])(t,"itemStyle",{color:"#ddd",borderWidth:2}),t),{name:"Data Score",type:"pie",radius:"25%",itemStyle:{color:String(this.scoreColor)},label:{normal:{color:"white",position:"center",fontWeight:"bolder",fontSize:18}},data:[{value:10,name:"Data Score: \n"+String(this.score)}]}]};this.chart3.setOption(l,!0)},updateScore:function(){this.score=100-this.numPulse-this.numSkips-this.numResets-this.numSaturated,this.score>90?this.scoreColor="green":this.score>60&&this.score<90?this.scoreColor="#FFA500":this.score<50&&(this.scoreColor="#CD5C5C"),console.log(this.scoreColor)},cumulative:function(){"primary"==this.cumulativeColor?(this.cumulativeColor="secondary",this.cumulativeCheck=!0,num=1,this.timeseries=[]):(this.cumulativeColor="primary",this.num=98,this.cumulativeCheck=!1,this.timeseries=[],this.timeseries=[])}},Object(c["a"])(j,"cumulative",function(){this.timeseries=[],this.timeseries=[],"primary"==this.cumulativeColor?(this.cumulativeColor="secondary",this.cumulativeCheck=!0,num=1):(this.num=98,this.cumulativeCheck=!1)}),Object(c["a"])(j,"change2018",function(){if(this.timeseries=[],this.graphseries=[],"primary"==this.clr2018){this.clr2018="secondary",this.years[3]=!0,this.years[2]=!1,this.years[1]=!1,this.years[0]=!1,this.clr2017="primary",this.clr2016="primary",this.clr2015="primary";var t=[],e=new Date("2018-01-02"),a=new Date("2019-01-01");while(e<=a){t.push(String(e.getFullYear())+"-"+String(e.getMonth()+1)+"-"+String(e.getDate()));var s=e.getDate()+1;e.setDate(s)}this.dateStr2018=t.join("||")}else this.clr2018="primary",this.dateStr2018="",this.years[3]=!1}),Object(c["a"])(j,"change2017",function(){if(this.timeseries=[],this.graphseries=[],"primary"==this.clr2017){this.clr2017="secondary",this.years[2]=!0,this.years[3]=!1,this.years[1]=!1,this.years[0]=!1,this.clr2018="primary",this.clr2016="primary",this.clr2015="primary";var t=[],e=new Date("2017-01-02"),a=new Date("2018-01-01");while(e<=a){t.push(String(e.getFullYear())+"-"+String(e.getMonth()+1)+"-"+String(e.getDate()));var s=e.getDate()+1;e.setDate(s)}this.dateStr2017=t.join("||")}else this.clr2017="primary",this.dateStr2017="",this.years[2]=!1}),Object(c["a"])(j,"change2016",function(){if(this.timeseries=[],this.graphseries=[],"primary"==this.clr2016){this.clr2016="secondary",this.years[1]=!0,this.years[3]=!1,this.years[2]=!1,this.years[0]=!1,this.clr2018="primary",this.clr2017="primary",this.clr2015="primary";var t=[],e=new Date("2016-01-02"),a=new Date("2017-01-01");while(e<=a){t.push(String(e.getFullYear())+"-"+String(e.getMonth()+1)+"-"+String(e.getDate()));var s=e.getDate()+1;e.setDate(s)}this.dateStr2016=t.join("||")}else this.clr2016="primary",this.dateStr2016="",this.years[1]=!1}),Object(c["a"])(j,"change2015",function(){if(this.timeseries=[],this.graphseries=[],"primary"==this.clr2015){this.clr2015="secondary",this.years[0]=!0,this.years[3]=!1,this.years[2]=!1,this.years[1]=!1,this.clr2018="primary",this.clr2017="primary",this.clr2016="primary";var t=[],e=new Date("2015-01-02"),a=new Date("2016-01-01");while(e<=a){t.push(String(e.getFullYear())+"-"+String(e.getMonth()+1)+"-"+String(e.getDate()));var s=e.getDate()+1;e.setDate(s)}this.dateStr2015=t.join("||")}else this.clr2015="primary",this.dateStr2015="",this.years[0]=!1}),Object(c["a"])(j,"showDate",function(){var t=[],e=new Date("2019-01-02"),a=new Date("2019-02-25");while(a<=e){t.push(String(a.getFullYear())+"-"+String(a.getMonth()+1)+"-"+String(a.getDate()));var s=a.getDate()+1;a.setDate(s)}this.dateArray=t,this.dateArrayString=this.dateArray.join("||"),console.log(this.dateArrayString)}),Object(c["a"])(j,"changeQuant",function(t){this.qname=t,console.log(this.qname),this.timeseries=[],this.graphseries=[]}),Object(c["a"])(j,"changeBuilding",function(t){var e=this;this.timeseries=[],this.graphseries=[],console.log(t),this.$http.get("http://energywatch.fac.gatech.edu:3000/api/rollcall?num=1&bldg="+t).then(function(a){console.log(a.data);for(var s=[],r=0;r<a.data.length;r++)console.log(a.data[r].qName),s.push({state:a.data[r].qName,abbr:a.data[r].qName});e.qnameList=s,e.building=t})}),Object(c["a"])(j,"showGraphFun",function(){var t=this,e=[],a=new Date("2019-01-02"),s=new Date;while(a<=s){e.push(String(a.getFullYear())+"-"+String(a.getMonth()+1)+"-"+String(a.getDate()));var r=a.getDate()+1;a.setDate(r)}this.dateArrayString=e.join("||"),console.log(this.dateArrayString),this.showGraph=!0,this.$http.get("http://energywatch.fac.gatech.edu:3000/api/rollcall?num=1&bldg="+String(this.building)+"&time="+String(this.dateArrayString)).then(function(e){console.log(e.data),t.graphdata=Object(h["a"])(e.data);for(var a=[],s=[],r=0;r<t.graphdata.length;r++)t.graphdata[r].sName==t.building&&t.graphdata[r].qName==t.qname&&(a.push(t.graphdata[r].data[0].time.slice(5,10)),s.push(t.graphdata[r].data[0].value));if(1==t.cumulativeCheck)for(var i=s[0],n=0;n<s.length;n++)s[n]=s[n]-i;t.graphseries.push({type:"line",data:s,name:"Year to date"}),console.log(t.graphseries[0].name),0==t.timeseries.length?t.timeseries=a:console.log("No change in series");t.timeseries,t.graphseries,t.building,t.qname})}),Object(c["a"])(j,"showgraphYearly",function(){var t=this;this.loading2=!0;for(var e="",a=[this.dateStr2015,this.dateStr2016,this.dateStr2017],s=0;s<this.years.length;s++)1==this.years[s]&&(e+=String(a[s])+"||");this.$http.get("http://energywatch.fac.gatech.edu:3000/api/rollcall?num=1&bldg="+String(this.building)+"&time="+String(e)).then(function(a){console.log("http://energywatch.fac.gatech.edu:3000/api/rollcall?num="+String(t.num)+"&bldg="+String(t.building)+"&time="+String(e)),console.log(a);for(var s=[],r=[],i=0,n=a.data.length;i<n;i++)if(a.data[i].qName==t.qname&&5==o()(a.data[i]).length){for(var l=0,h=0,c=_.size(a.data[i].data);h<c;h++)l+=a.data[i].data[h].value;l/=_.size(a.data[i].data),s.push(l),r.push(a.data[i].data[0].time)}for(var u=0,g=r.length;u<g;u++)r[u]=r[u].slice(5,10);for(var p=[],d=0,m=s.length;d<m;d++)p.push({date:r[d],value:s[d]});for(var v=[],f=[],y=0,b=p.length;y<b;y++)if(f.includes(p[y].date))for(var x=0;x<v.length;x++)v[x].date==p[y].date&&null!=p[y]&&v[x].val.push(p[y].value);else f.push(p[y].date),v.push({date:p[y].date,val:[p[y].value]});console.log("Obj Array"),console.log(p);var S=[],w=[];v=_.sortBy(v,"date"),console.log("Total Array"),console.log(v);for(var D=0,j=v.length;D<j;D++)console.log(_.size(v[D].val)),v[D].val=_.sum(v[D].val)/_.size(v[D].val),S.push(v[D].val),w.push(v[D].date);var k=[];k.push(S[0]),k.push(S[0]/2+S[1]/2),k.push(S[0]/3+S[1]/3+S[2]/3),k.push(S[0]/4+S[1]/4+S[2]/4+S[3]/4);for(var C=5,O=S.length-5;C<O;C++){var A=S[C-4]+S[C-3]+S[C-2]+S[C-1]+S[C],q=S[C+1]+S[C+2]+S[C+3]+S[C+4],V=(A+q)/9;k.push(V)}if(k.push(S[-1]/6+S[-3]/6+S[-3]/6+S[-4]/6+S[-5]/6+S[-6]/6),k.push(S[-1]/5+S[-3]/5+S[-3]/5+S[-4]/5+S[-5]/5),k.push(S[-1]/4+S[-3]/4+S[-3]/4+S[-4]/4),k.push(S[-1]/3+S[-2]/3+S[-3]/3),k.push(S[-1]/2+S[-2]/2),k.push(S[-1]),console.log("Moving average"),console.log(k),console.log(k.length),console.log(S.length),1==t.cumulativeCheck)for(var F=S[0],M=0;M<S.length;M++)S[M]=S[M]-F;t.loading2=!1,0==t.cumulativeCheck&&t.graphseries.push({type:"line",data:k,name:"Moving average"}),S=t.correctPulses(S),S=t.correctReset(S),t.graphseries.push({type:"line",data:S,name:"Averaged Values"}),t.graphseries2.push({type:"line",data:S,name:"Average Value for Year"}),console.log("graphseries"),console.log(t.graphseries),t.timeseries=w,console.log(t.timeseries),t.formatData(),console.log(t.graphDays),1==t.cumulativeCheck?t.disSmooth=!1:t.disSmooth=!0;t.graphDays,t.graphseries,t.building,t.qname;var P={legend:{type:"scroll",x:"right"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:50,top:10,right:30,bottom:20},xAxis:{type:"category",data:t.graphDays},yAxis:{type:"value",max:"dataMax",min:"dataMin"},series:t.graphseries2,title:{text:t.building+" "+t.qname,x:"center"}};console.log("Options set"),t.updateScore(),t.updatePieChart(),t.chart.setOption(P,!0)})}),j),mounted:function(){this.chart=C.a.init(this.$refs.echartsCard),window.addEventListener("resize",this.chart.resize),this.chart3=C.a.init(this.$refs.echartsCard3),window.addEventListener("resize",this.chart.resize)}},A=O,q=a("7496"),V=a("8336"),F=a("b0af"),M=a("549c"),P=a("2e4b"),N=a("ce7e"),T=a("cd55"),z=a("49e2"),L=a("132d"),R=a("e449"),I=a("f774"),E=a("b56d"),Y=a("9910"),B=a("2677"),$=a("71d9"),G=a("2a7f"),Q=Object(m["a"])(A,i,n,!1,null,null,null),W=Q.exports;f()(Q,{VApp:q["a"],VBtn:V["a"],VCard:F["a"],VContainer:y["a"],VContent:M["a"],VDatePicker:P["a"],VDivider:N["a"],VExpansionPanel:T["a"],VExpansionPanelContent:z["a"],VFlex:b["a"],VIcon:L["a"],VLayout:S["a"],VMenu:R["a"],VNavigationDrawer:I["a"],VSelect:E["a"],VSpacer:Y["a"],VTextField:B["a"],VToolbar:$["a"],VToolbarTitle:G["a"]});var J=a("bc3a"),H=a.n(J),U=a("a7fe"),K=a.n(U);a("2ef0");s["a"].use(K.a,H.a),s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(W)}}).$mount("#app")},"9b19":function(t,e,a){t.exports=a.p+"img/logo.07d1e22e.svg"}});
//# sourceMappingURL=app.1479a835.js.map